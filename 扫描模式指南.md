# 🐔 华尔街母鸡大规模股票扫描指南

## 扫描模式选择

### 可用扫描模式

| 模式 | 描述 | 股票数量 | 适合场景 |
|-----|------|---------|----------|
| `sp500` | 标普500指数成分股 | ~500只 | 全市场大盘股扫描 |
| `nasdaq100` | 纳斯达克100科技股 | ~100只 | 科技股重点扫描 |
| `dow30` | 道琼斯30蓝筹股 | 30只 | 传统蓝筹股扫描 |
| `mega_cap` | 超大盘股(市值>1000亿) | ~40只 | 巨头公司扫描 |
| `balanced` | 平衡组合(推荐) | ~80只 | 日常监控推荐 |
| `active` | 最活跃股票 | ~100只 | 短线交易扫描 |

### 设置扫描模式

#### 方法1: 环境变量设置
编辑 `.env` 文件：
```bash
SCAN_MODE=sp500
MAX_STOCKS_PER_SCAN=100
BATCH_SIZE=20
API_DELAY=0.1
```

#### 方法2: 命令行临时设置
```bash
# 扫描标普500前50只股票
SCAN_MODE=sp500 MAX_STOCKS_PER_SCAN=50 python3 main.py once

# 扫描纳斯达克100全部股票
SCAN_MODE=nasdaq100 python3 main.py once

# 扫描道琼斯30蓝筹股
SCAN_MODE=dow30 python3 main.py once
```

#### 方法3: 使用演示脚本
```bash
# 交互式选择扫描模式
python3 scan_demo.py

# 快速测试(道琼斯30前10只)
python3 scan_demo.py test
```

##  配置参数说明

### 核心参数
- **SCAN_MODE**: 扫描模式（必填）
- **MAX_STOCKS_PER_SCAN**: 每次扫描最大股票数（默认100）
- **BATCH_SIZE**: 批处理大小（默认20）
- **API_DELAY**: API调用间隔秒数（默认0.1）

### 性能调优建议

#### 快速扫描配置
```bash
BATCH_SIZE=30        # 大批次，减少休息次数
API_DELAY=0.05       # 短间隔，提升速度
```

#### 稳定扫描配置  
```bash
BATCH_SIZE=15        # 中等批次
API_DELAY=0.2        # 长间隔，避免API限制
```

#### 大规模扫描配置
```bash
MAX_STOCKS_PER_SCAN=500  # 扫描更多股票
BATCH_SIZE=25           # 适中批次
API_DELAY=0.1           # 标准间隔
```

## 📊 扫描输出说明

### 实时显示
- 🟢 = 买入信号
- 🔴 = 卖出/做空信号  
- ⚪ = 无信号
- ❌ = 扫描失败

### 批次信息
```
📦 批次 2/5 (20 只股票)
============================================================
📊 AAPL   ⚪📊 MSFT   🟢📊 GOOGL  ⚪📊 AMZN   🔴
```

### 总结报告
```
================================================================================
📊 扫描总结  
================================================================================
⏱️  扫描时间: 23.0 秒
📈 总扫描数: 50 只
🎯 发现信号: 8 个
🟢 买入信号: 7 只
🔴 卖出信号: 1 只
❌ 扫描失败: 0 只
```

## 🚀 使用示例

### 1. 日常监控 (推荐)
```bash
# 使用平衡模式，扫描80只精选股票
SCAN_MODE=balanced python3 main.py once
```

### 2. 大盘全扫描
```bash
# 扫描标普500前200只股票
SCAN_MODE=sp500 MAX_STOCKS_PER_SCAN=200 python3 main.py once
```

### 3. 科技股专扫
```bash
# 扫描纳斯达克100科技股
SCAN_MODE=nasdaq100 python3 main.py once
```

### 4. 蓝筹股监控
```bash  
# 扫描道琼斯30蓝筹股
SCAN_MODE=dow30 python3 main.py once
```

### 5. 超大盘股追踪
```bash
# 扫描市值超1000亿的巨头
SCAN_MODE=mega_cap python3 main.py once
```

## ⏰ 定时扫描

### 设置定时任务
```bash
# 启动定时扫描模式 (9:00, 10:30, 14:00, 15:30)
python3 main.py
```

### 自定义扫描时间
修改 `main.py` 中的扫描时间设置：
```python
schedule.every().day.at("09:00").do(self.run_once)
schedule.every().day.at("11:00").do(self.run_once)  # 新增
schedule.every().day.at("14:00").do(self.run_once)
schedule.every().day.at("15:30").do(self.run_once)
```

## 📈 信号质量优化

### 高质量信号筛选
系统会自动筛选以下高质量信号：
- **金叉信号**: EMA50突破EMA200 (强势)
- **MACD金叉**: MACD线突破信号线 (中势)
- **RSI超卖反弹**: RSI<30后反弹 (中势)
- **布林带突破**: 价格突破上轨+放量 (强势)
- **RSI超买回落**: RSI>70后回落 (做空)

### 内幕交易加成
系统会获取真实内幕交易数据，为信号质量加分

## 🛡️ 风险控制

### 自动风险管理
- **止损设置**: 基于ATR的2倍距离
- **仓位控制**: 每笔交易风险限制在2%
- **盈亏比**: 固定2:1的风险回报比

### 分散投资建议
- 建议同时关注多个行业
- 避免单一股票过度集中
- 根据账户大小调整仓位

## 🔧 故障排除

### 常见问题

#### 1. API限制报错
```
解决方案: 增加API_DELAY参数
SCAN_MODE=sp500 API_DELAY=0.5 python3 main.py once
```

#### 2. 扫描速度太慢
```
解决方案: 减少批次大小和扫描数量
MAX_STOCKS_PER_SCAN=50 BATCH_SIZE=10 python3 main.py once
```

#### 3. 股票列表获取失败
```
解决方案: 系统会自动使用备选列表，检查网络连接
```

#### 4. 内存使用过高
```
解决方案: 减小批次大小
BATCH_SIZE=10 python3 main.py once
```

## 📱 Mac通知设置

系统会自动发送Mac桌面通知：
- 🟢 买入信号通知
- 🔴 卖出信号通知  
- 🔔 每日市场总结

可在Mac系统偏好设置中调整通知权限。

##  日志记录

所有交易信号都会保存到：
- **文件位置**: `logs/trading_signals.log`
- **格式**: JSON格式，便于数据分析
- **内容**: 包含价格、技术指标、仓位建议等完整信息

---


祝你交易顺利！🚀📈
